# <span id='top'>엑셀함수 문제풀이 시뮬레이터 프로젝트 EFSS <img src = "![susu](https://github.com/24-gitTest/demo-repository/assets/99867931/238c60c2-72d5-43ba-a52a-d2fb0513b7f3)"/></span>

![image](https://github.com/an1413/excelQuiz/assets/87430624/972743e8-efb7-4c9f-ad1b-3c232814281a)


> 📎 <a href='http://susumarket.shop/'>배포 URL</a> <br/>
>
> <br/>

<br/>

## 📃 목차 (클릭 시 해당 목차로 이동합니다.)
- [🎨 프로젝트 소개](#1-프로젝트-소개)
  
- [🛠 개발 환경 및 기술 스택](#3-개발-환경-및-기술-스택)

- [🗓️ 개발 일정](#4-개발-일정)
   
- [📌 Git Branch 전략](#5-git-branch-전략)

- [📅 프로젝트 관리 및 진행](#6-프로젝트-관리-및-진행)

- [👥 협업 문화](#7-협업-문화)

- [🧙 구현 기능 및 담당자](#8-구현-기능-및-담당자)

- [📃 페이지 캡쳐](#9-페이지-캡쳐--제목-클릭-시-해당-기능-상세-설명으로-이동됩니다-)

- [🖥 차별화 코드 설명](#10-차별화-코드-설명)

- [💫 느낀점](#11-느낀점)

- [🗂 프로젝트 구조](#12-프로젝트-구조)

  <br/>
  <br/>

## 1.🎨 프로젝트 소개

** EFSS는 시뮬레이터를 이용한 엑셀 함수 문제 풀이 웹사이트입니다. **

#### 기획 의도

- 엑셀함수 문제풀이를 위한 많은 방법 중에서 개인의 스타일에 맞는 것을 찾기위한 시간의 비용을 절약한. <br/>
- 어떤 기능이 있으면 좋을지 미래의 사용자들에게 고려중인 기능 중 어떤 기능들이 선호도가 높은지 확인해 보았다.  <br/>
- 엑셀 시뮬레이터, 엑셀 함수 관련 문제 풀기, 엑셀의 기본적인 기능 설명이 높은 선호도를 보였다. <br/>
![image](https://github.com/an1413/excelQuiz/assets/87430624/0e4da30d-acba-4df8-b6e3-9d8597ceaef9)

<br/>

<p align="right"><a href="#top">TOP 🔼</a></p>

<br/>

## 3.🛠 개발 환경 및 기술 스택

### 3-1. 개발 환경

- IDE : Visual Studio Code 1.74.2
- OS : Windows 10

![image](https://github.com/an1413/excelQuiz/assets/87430624/5b79095a-4217-4afc-95c0-493e00ccffa9)
                                                                                                                                                                                                                                    

<p align="right"><a href="#top">TOP 🔼</a></p>

<br/>

## 4.📆 개발 일정

#### 🔥 2023-09-21 ~ 2023-12-10

![image](https://github.com/24-gitTest/demo-repository/assets/87430624/4e0c7d4c-59b8-42d7-9f04-64b9b9a66b97)

<details>
  <summary><b>팀 미팅, 프로젝트 계획 : 2023-06-02 ~ 2023-06-05</b></summary>
  <div markdown="1">
    <ul>
     <li>아이스 브레이킹</li>
     <li>프로젝트 주제 토의</li>
     <li>사용 기술 스택정하기</li>
     <li>개인 공부</li>
     <li>깃&깃헙 전략 이해</li>
    </ul>
  </div>
</details>
<details>
  <summary><b>컨벤션 및 api학습을 위한 사전과제(날씨앱) 진행 : 2023-06-08 ~ 2023-06-11</b></summary>
  <div markdown="1">
   사전과제(날씨앱)을 함으로써 얻었던 이점
    기대효과 프로젝트에 사용되는 기능을 미리 사용해봄으로써 직후 1차 기능 구현할 때 도움이 됨 <br>
    코드 컨벤션 연습 <br>
    API 비동기 이해 <br>
    styled-component 학습 <br>
    날씨앱 레포지토리 https://github.com/24-test-project/weatherapp
  </div>
</details>
<details>
  <summary><b>요구사항 파악 및 프로젝트 규칙 설립 : 2023-06-08 ~ 2023-06-12</b></summary>
  <div markdown="1">
    <ul>
     <li>팀 규칙</li>
     <li>기획, 디자인</li>
     <li>prettier 설정</li>
     <li>코드 컨벤션 설정</li>
     <li>git 컨벤션 설정</li>
     <li>폴더 구조</li>
     <li>공통 컴포넌트 지정</li>
     <li>GlobalStyle 설정</li>
    </ul>
  </div>
</details>
<details>
  <summary><b>공통UI 컴포넌트 개발 : 2023-06-12 ~ 2023-06-14</b></summary>
  <div markdown="1">
    <ul>
     함께 같이 만들었던 것
     <li>에러 메시지</li>
     <li>스플래시 화면 개발</li>
     <li>로그인 시작 페이지 개발</li>
    </ul>
  </div>
</details>
<details>
  <summary><b>1차 개발 : 2023-06-14 ~ 2023-06-19</b></summary>
  <div markdown="1">
  <img src="https://github-production-user-asset-6210df.s3.amazonaws.com/87430624/249535797-acf0a71a-2645-4469-83fb-38a1ab6fd39c.png"/>

  </div>
</details>
<details>
  <summary><b>2차 개발 : 2023-06-19 ~ 2023-06-24</b></summary>
  <div markdown="1">

<img src="https://github.com/24-gitTest/demo-repository/assets/87430624/3beb9c15-3633-489f-af1d-efd5c7ee1c8d"/>

팔로우 좋아요 게시물작성(3개까지) 캔버스 댓글

  </div>
</details>
<details>
  <summary><b>버그 수정 및 유지보수 : 2023-06-24 ~ 2023-06-27</b></summary>
  <div markdown="1">
   <img src="https://github.com/24-gitTest/demo-repository/assets/87430624/33db4bf8-b0dd-4f5e-8d0e-d23a1e2bd0d7"/>
   <img src="https://github.com/24-gitTest/demo-repository/assets/87430624/0df4e7f1-b267-4aa5-a130-a3f270ef075d"/>
"
  </div>
</details>
<details>
  <summary><b>추가 구현 및 배포 : 2023-06-26 ~ 2023-06-28</b></summary>
  <div markdown="1">
   <img src="https://github.com/24-gitTest/demo-repository/assets/87430624/6a7fad2a-263b-4b14-9d71-64e037120df0"/>"
  </div>
</details>

<br/>

<p align="right"><a href="#top">TOP 🔼</a></p>

## 5.📌 Git Branch 전략

![GitBranch](https://github.com/24-gitTest/demo-repository/assets/87430624/745e1de4-2428-48f4-b97f-f9af03eae4f3)

- 소규모 프로젝트에 맞게 Main, Develop, Feature 세 Branch를 사용하는 전략 사용
- Merge 대신 Rebase를 사용하여 보기 좋은 커밋 히스토리를 유지함

<p align="right"><a href="#top">TOP 🔼</a></p>

<br/>

<br/>

## 6.📅 프로젝트 관리 및 진행

### 🚀 GitHub Action - 브랜치 생성 자동화

![image](https://user-images.githubusercontent.com/87430624/249042831-74c0d04e-7339-4b1b-b8f2-4d5d707e8e4b.png)

- [Create Issue Branch](https://github.com/marketplace/actions/create-issue-branch)
- 이슈를 생성하면 GitHub Action으로 해당 이슈에 해당하는 브랜치가 자동으로 생성되도록 설정하여 브랜치명을 고민하고 브랜치를 생성하는 시간을 줄였습니다.
  - [브랜치 자동화 설정 상세 내용](<[https://github.com/nailedReact/react-app/wiki/%EB%B8%8C%EB%9E%9C%EC%B9%98-%EC%9E%90%EB%8F%99%ED%99%94-%EC%84%A4%EC%A0%95-%EB%82%B4%EC%9A%A9](https://github.com/nailedReact/bokgungom-market/wiki/%F0%9F%AA%84-%EB%B8%8C%EB%9E%9C%EC%B9%98-%EC%9E%90%EB%8F%99%ED%99%94-%EC%84%A4%EC%A0%95-%EB%82%B4%EC%9A%A9)>)
- 예) 자동 생성된 브랜치를 pull 하고 `git checkout -t origin/feat/issue-81`하여 해당 브랜치로 이동합니다.
<p align="right"><a href="#top">TOP 🔼</a></p>
<br>

<p align="right"><a href="#top">TOP 🔼</a></p>
<br>

## 7.👥 협업 문화

#### 모두가 참여하는 회의

노션을 이용하여 함께 의견을 나누고 실시간으로 의견을 텍스트화 시켜 더 활발한 회의를 진행
서로의 의견이 묻히지 않도록 각 팀원의 의견을 집중해서 들었고 팀원 모두가 이해했는지 항상 물어봄
1차개발, 2차개발을 나누어 진행하였는데 각 개발단계에서 끝내지 못한 팀원이 있다면 모두 함께 모여 도와줌

<br/>

#### 💬 디스코드 및 노션활용

- 디스코드의 쓰레드 및 화면공유 기능을 이용하여 각자의 개발진전도와 구현상황을 편리하게 공유했습니다.
- 노션 팀 스페이스 페이지를 사용하여 업무 및 요구사항, 일정을 상시 확인할 수 있었습니다.

![image](https://github.com/24-gitTest/demo-repository/assets/87430624/d97c7d1d-71df-4859-acec-1b423fa3e122)

<br/>

<br/>

<p align="right"><a href="#top">TOP 🔼</a></p>

<br/>

## 8.🧙 구현 기능 및 담당자

<img src="https://user-images.githubusercontent.com/87430624/249465552-50eec324-8548-4e70-ba1d-1dfd3875100f.png" width="1000" />

<br/>

<p align="right"><a href="#top">TOP 🔼</a></p>

<br/>

## 9.📃 페이지 캡쳐 ( 제목 클릭 시 해당 기능 상세 설명으로 이동됩니다. )

|![image](https://github.com/an1413/excelQuiz/assets/87430624/66c82ce7-b3b1-4ec8-98cb-9fada3e4a740)
|![image](https://github.com/an1413/excelQuiz/assets/87430624/3837f0d9-0ad2-426d-8948-30f896c97edd)
|![image](https://github.com/an1413/excelQuiz/assets/87430624/d30a3480-4247-4da5-82c0-88d941c51e6b)
|![image](https://github.com/an1413/excelQuiz/assets/87430624/86fa9991-20f5-4b1b-bf95-20c37ff98f2d)
|![image](https://github.com/an1413/excelQuiz/assets/87430624/28f30595-dc89-4ebb-a22c-c144fbc8e320)
|![image](https://github.com/an1413/excelQuiz/assets/87430624/feefc1ea-37ae-42e4-b2b7-a7dd992cbf0c)

<p align="right"><a href="#top">TOP 🔼</a></p>

<br/>

## 10.💻 차별화 코드 설명

### 1 ) CustomAxios

- CustomAxios : axios를 커스텀 하여 반복되어 들어가는 헤더 값과 baseUrl를 설정하여 axios 사용 시 헤더값과 baseUrl를 생략하도록 하였습니다.
- 이를 통해 코드를 단축 시킬수 있었고, 편리하게 axios를 사용할 수 있었습니다.

```javascript
import axios from "axios";

export const customAxios = axios.create();

customAxios.interceptors.request.use(
  (config) => {
    const accessToken = localStorage.getItem("accessToken") || "";
    config.baseURL = process.env.REACT_APP_BASE_URL;
    config.headers.Authorization = accessToken ? `Bearer ${accessToken}` : "";

    return config;
  },
  (error) => {
    console.log(error);
    return Promise.reject(error);
  },
);
```

<br/>

### 2 ) loadsh 라이브러리 debounce 기능을 이용한 검색 최적화

- 기존 검색시 onChange 이벤트에서 input의 변화가 감지될 때 마다 API요청이 발생하여 불필요한 API 요청이 발생합니다.
- debunce을 통해 설정한 시간이 경과한 이후 이벤트가 호출되지 않을 때 이벤트를 한 번만 호출하게 해주어 불필요한 API 호출을 막아줍니다.
- lodash debounce는 첫 번째 인자로 실행할 함수, 두 번째 인자로 시간을 받습니다.

```javacript
// debounce패턴 적용한 유저 검색 함수
 const handleSearch = useCallback(
    debounce(async (value) => {
      try {
        const response = await customAxios.get(
          `/user/searchuser/?keyword=${value}`,
        );
        setUserList(response.data);
      } catch (error) {
        console.error(error);
      }
    }, 500), // 500ms 동안 입력이 없다면 함수실행
    [],
  );
```

- 구현 화면

  - debounce 적용 전

  ![디바운싱적용전](https://github.com/NamJongtae/susumarket-deploy/assets/113427991/a67fa338-005f-4901-bfaa-e4e231441d1c)

  - debounce 적용 후

  ![디바운싱적용후](https://github.com/NamJongtae/susumarket-deploy/assets/113427991/ab9b3067-1e86-4a9b-bc10-3ab93dea3862)

<br/>

### 3 ) img Validation

- imgValidation 함수를 만들어서 이미지 사용 페이지에 공통으로 사용 가능하도록 적용하였습니다.
- imgValidation을 함수로 만들어서 코드 중복사용을 피하고 imgValidation 하나로 통일하였습니다.
- 이미지 파일이 없거나 API에서 제공하는 이미지 형식이 아니거나 크기가 초과한다면 이미지를 올리지 못하도록 제한하고, 경고창이 출력되도록 하였습니다.

```javascript
export const imgValidation = (file) => {
  const reg = /(.*?)\.(jpg|jpeg|png|gif|bmp|tif|heic)$/;
  // 파일 확인
  if (!file) {
    return false;
  }
  // 파일 사이즈 확인
  if (file.size > 1024 * 1024 * 10) {
    alert("이미지 파일의 크기를 초과하였습니다.(최대 10MB)");
    return false;
  }
  // 이미지 지원 형식 확인
  if (!reg.test(file.name)) {
    alert(
      "이미지 형식을 확인해 주세요!\n(지원형식 : .jpg,.gif, .png,.jpeg, .bmp,.tif, *.heic)",
    );
    return false;
  }
  // 모두 만족 한다면 true 반환
  return true;
};
```

- 구현 화면
  - 프로필 이미지 변경에 imgValidation 적용
    
![imgValidation](https://github.com/NamJongtae/susumarket-deploy/assets/113427991/55f681a2-4054-4175-9b4b-d5bd41c05244)

</br>

### 4 ) 무한스크롤

- 무한스크롤을 이용하여 데이터를 일부만 가져와 서버의 부담을 줄이고 로딩속도를 개선 하였습니다.
- react-intersection-observer 라이브러리를 이용하여 무한스크롤을 구현하였습니다.
- react-intersection-observer 라이브러이의 useView()의 ref값을 관찰요소 ref값에 넣으면 관찰요소를 지정할 수 있습니다.
- 만약 관찰요소가 화면 출력되면 inView true로 화면에서 사라진다면 false로 변경되게 됩니다.
- hasMore를 통해 다음 데이터가 없다면 api 요청을 일어나지 않게 조건을 걸어 주었습니다.
- hasMore는 현재 API에서 받아온 post의 length와 limt가 같은지 비교하여 다음 데이터가 있는지 판단해줍니다.
- API 요청을 보낼 때 마다 skip 값을 limit 값만 만큼 증가 시켜주어 다음 데이터를 받아올수 있도록 하였습니다.

```javascript
export default function ProfilePost({
  onClickButton,
  settingPostModalProps,
  closeModal,
  userData,
  isFeed,
}) {
  const [postData, setPostData] = useState([]);
  const [isNonePostData, setIsNonePostData] = useState(false);
  const [isGallery, setIsGallery] = useState(false);
  const [isLoading, setIsLoading] = useState(true);
  const [ref, inVeiw] = useInView();
  const limit = 5;
  const [skip, setSkip] = useState(0);
  const [hasMore, setHasMore] = useState(true);
  const navigate = useNavigate();

  // 게시물 정보를 받아옴
  const fetchPostData = async () => {
    try {
      const response = await customAxios(
        isFeed
          ? `post/feed?limit=${limit}&skip=${skip}`
          : `post/${userData.accountname}/userpost?limit=${limit}&skip=${skip}`,
      );
      const data = isFeed ? response.data.posts : response.data.post;
      setPostData((prev) => [...prev, ...data]);
      setHasMore(data.length === limit);
      setSkip((prev) => prev + limit);
      setIsLoading(false);
      if (data.length === 0 && skip === 0) {
        setIsNonePostData(true);
      } else {
        setIsNonePostData(false);
      }
    } catch (error) {
      console.log(error);
    }
  };

  useEffect(() => {
    if (skip === 0 && !inVeiw) {
      fetchPostData();
    }
    if (hasMore && inVeiw) {
      fetchPostData();
    }
  }, [inVeiw]);

  return (
    // isFeed를 통해 profile 페이지에서 출력될 요소와 feed 페이지에서 출력될 요소를 구분
    <ProfilePostWrapper>
           (중략)...
            <ProfilePostUl>
              {postData.map((post) => (
                <ProfilePostList
                  key={post.id}
                  onClickButton={onClickButton}
                  settingPostModalProps={settingPostModalProps}
                  closeModal={closeModal}
                  reFetchPostData={fetchPostData}
                  post={post}
                  setPostData={setPostData}
                  isFeed={isFeed}
                  userData={userData}
                />
              ))}
              <div ref={ref}></div>
            </ProfilePostUl>
          )}
        </>
      )}
    </ProfilePostWrapper>
  );
}

```

- 구현 화면

![무한스크롤](https://github.com/NamJongtae/susumarket-deploy/assets/113427991/f7e41163-98bd-41cc-8788-24d1efdd3c50)

<br/>
<p align="right"><a href="#top">TOP 🔼</a></p>
<br/>

### 5 ) 이미지 lazy-loading 적용 및 점진적 로딩 기법을 통한 이미지 최적화
- 점진적 로딩 기법를 통해 이미지가 로딩될 때 원본 이미지 대신 저화질의 이미지를 보여줌으로써 UX를 향상 시켰습니다.
- react-intersection-observer 라이브러리를 이용하여 lazy-loading를 구현하였습니다.
- 이를 통해 이미지가 화면에서 나타날 때 이미지를 불러올 수 있도록 설정하여 로딩시간을 단축 시킬수 있습니다.
- 이 두 가지 기법을 이미지에 적용하기 위해 ProgressiveImg 컴포넌트를 만들고, 이미지에 적용시켜 주었습니다.
- ProgressvieImg Props
  - src : 원본 이미지의 url 입니다.
  - ...props : 그 외 props를 모두 받아오기 위해 사용 하였습니다.
- 이미지 lazy-loading 적용 후 초기 로딩 속도 **1.9초에서 1.5초로 0.4초 감소** 및 이미지 리소스 **4.5MB 에서 2.6MB 로 1.9MB(약 42%) 감소**하였습니다.
  
```javascript
import React, {useEffect, useState } from "react";
import { Img } from "./progressiveImg.styles";
import { useInView } from "react-intersection-observer";
import noImg from "../../../img/no-image.svg";
import noImgWebp from "../../../img/webp/no-image.webp";
import { resolveWebp } from "../../../library/checkWebpSupport";
import placeholderImg from "../../../img/placeholderImg.svg";
import placeholderImgWebp from "../../../img/webp/placeholderImg.webp";

// ProgressvieImg 컴포넌트
export default function ProgressiveImg({ src, ...props }) {
  const placeholderSrc = resolveWebp(placeholderImgWebp, placeholderImg);
  // 이미지 src를 관리
  const [imgSrc, setImgSrc] = useState(placeholderSrc || src);
  // 현재 로딩이 상태
  const [isLoading, setIsLoading] = useState(true);
  const { ref, inView } = useInView();
  useEffect(() => {
    // 이미지가 화면에서 보이고, imgSrc가 placholder이미지 일때 이미지를 받아옴
    if (inView && imgSrc === placeholderSrc) {
      const img = new Image();
      img.src = src;
      img.onload = () => {
        setImgSrc(src);
        setIsLoading(false);
      };
      img.onerror = () => {
        setIsLoading(false);
        setImgSrc(resolveWebp(noImgWebp, noImg));
      };
    }
  }, [src, inView]);

  return (
    <Img
      {...{ src: imgSrc, ...props }}
      // 로딩 상태일 때 blur효과를 주기위해 사용
      className={isLoading ? "loading" : "loaded"}
      ref={ref}
    />
  );
}
```

- 구현화면
  - 이미지 lazy-loading 및 점진적 로딩 기법 적용 전
    
    ![lazy-loading 적용전](https://github.com/NamJongtae/susumarket-deploy/assets/113427991/d4d5eff6-64cc-4ac2-9e2d-fc85b36dffd4)
    
  - 이미지 lazy-loading 및 점진적 로딩 기법적용 후
    
    ![lazy-loading 적용후](https://github.com/NamJongtae/susumarket-deploy/assets/113427991/7fda2d6e-7919-49d2-bf83-9bfe4238d970)

<br/>
<p align="right"><a href="#top">TOP 🔼</a></p>
<br/>

### 6 ) 최신 이미지 형식 Webp 적용
- WebP 이미지는 JPEG나 PNG에 비해 압축률이 높고, 더 작은 파일 크기를 가지며, 높은 품질을 제공하는 이미지 형식입니다.
- Webp 이미지 형식은 구 브라우저는 지원하지 않기 때문에 **점진적 향상 기법**을 이용하여 다르게 처리해 주었습니다.
- Webp 이미지가 지원이 된다면 body 태그에 webp라는 className를 추가해주고, 지원되지 않는다면 no-webp라는 className을 추가해주었습니다.
- body className를 통해 이미지 형식이 다르게 적용되도록 처리하였습니다.
- 구 브라우저에서는 svg 이미지 형식이 적용되도록 처리하였습니다.
- Webp가 지원되는 브라우저에서는 Webp 이미지가 적용되도록 처리하였습니다.
- detectWebpSupport, resolveWebp 함수를 만들어 이를 적용시켜 주었습니다.
  
- detectWebpSupport
  - webpdata에 1x1 픽셀 크기의 WebP 형식의 이미지 데이터를 base64로 인코딩한 문자열을 할당합니다.
  - 이미지 로딩이 성공적으로 완료되거나 에러가 발생했을 때 callback 함수가 실행됩니다.
  - webp 이미지가 로딩 되고, webp이미지 지원여부 확인을 기다리기 위해 Promise를 이용해 비동기 처리를 해주었습니다.
  - image.src에 webpdata를 할당하여, 생성한 빈 이미지 객체가 해당 WebP 이미지를 로딩하도록 합니다.
  - callback 함수에서는 event.type이 "load"인 경우와 이미지의 너비(image.width)가 1 픽셀인 경우를 검사하여 브라우저가 WebP 이미지를 지원하는지 여부를 판별합니다.
  - 브라우저가 WebP 이미지를 지원하는 경우 document.body 요소의 classList에 "webp"를 추가합니다.
  - 지원하지 않는 브라우저라면 document.body 요소의 classList에 "no-webp"를 추가합니다.
    
- resolveWebp
  - webpSupported: webp지원 유무, img : Webp 이미지 경로, fallbackExt : Webp 이미지 대신 사용할 이미지 경로
  - ext에 이미지 형식을 저장합니다.
  - webpSupported가 false인 경우, ext이 webp인 경우에 webp이미지 경로 대신 webp 대신 사용할 이미지 경로를 반환합니다.

- Webp 이미지 적용으로 로컬 이미지 파일 리소스를 **350KB에서 37KB로 313KB** 줄였습니다.
 
```javascript
export async function detectWebpSupport() {
  // 이미지가 webp 지원유무를 파악하고 렌더링 될 수 있도록 비동기 처리
  return new Promise((resolve) => {
    const image = new Image();
    // 1px x 1px WebP 이미지
    const webpdata =
      "data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=";

    const callback = (event) => {
      // event.type이 "load"인 경우와 이미지의 너비(image.width)가 1 픽셀인 경우를 검사하여 브라우저가 WebP 이미지를 지원하는지 여부를 판별
      const result = event?.type === "load" && image.width === 1;
      if (result) {
        resolve(true); // WebP 지원됨
      } else {
        resolve(false); // WebP 지원되지 않음
      }
    };

    image.onerror = callback;
    image.onload = callback;
    image.src = webpdata;
  });
}
// webpSupported: webp 지원 유무, img: webp 이미지 경로, fallbackExt: webp 이미지 대체 이미지 형식
export const resolveWebp = (img, fallbackImg) => {
  const webpSupported = document.body.classList.contains("webp");
  // 이미지 포맷
  const ext = img.split(".").pop();
  // webpSupported false, ext가 webp인 경우
  if (!webpSupported && ext === "webp") {
    return fallbackImg
  }
  return img;
};
```

<br/>
<p align="right"><a href="#top">TOP 🔼</a></p>
<br/>

### 7 ) imgCompression 라이브러리를 이용한 이미지 압축
- 서버에 이미지를 전송할 시 필요한 이미지 만큼만 최소로 압축하여 이미지 리소스 낭비를 줄일 수 있도록 하였습니다.
- imgCompression 함수를 만들어 이를 적용 하였습니다.
```javascript
import imageCompression from "browser-image-compression";

export const uploadImgCompression = async (file) => {
  const options = {
    maxSizeMB: 10,
    maxWidthOrHeight: 304,
    useWebWorker:true,
  }
  const compressedFileBlob = await imageCompression(file, options);
  const preview = await imageCompression.getDataUrlFromFile(compressedFileBlob);
  return {compressedFileBlob, preview}
}

export const profileImgCompression = async (file) => {
  const options = {
    maxSizeMB: 10,
    maxWidthOrHeight: 220,
    useWebWorker:true,
  }
  const compressedFileBlob = await imageCompression(file, options);
  const preview = await imageCompression.getDataUrlFromFile(compressedFileBlob);
  return {compressedFileBlob, preview}
}
```

- 구현 화면
  
![imgCompression](https://github.com/NamJongtae/susumarket-deploy/assets/113427991/52b167c1-e062-40af-ab90-762df8f8c5d1)

- 이미지 압축 전

  이미지 크기 : 412MB

- 이미지 압축 후

  이미지 크기 : **412MB => 57MB (355MB 감소)**

<br/>
<p align="right"><a href="#top">TOP 🔼</a></p>
<br/>

<br/>
<p align="right"><a href="#top">TOP 🔼</a></p>
<br/>

## 12.🗂 프로젝트 구조

- `src/components/` : 서비스에서 사용하는 컴포넌트 (공통 컴포넌트, 공통 레이아웃)
- `src/commons/` : 공통컴포넌트 중 UI와 관련된 파일
- `src/context/` : 전역 데이터를 공유하기 위해 정의한 Context 파일
- `src/hooks/` : 재사용을 위해 분리한 Custom Hook
- `src/img/` : 서비스에서 사용하는 에셋 파일 (폰트, 아이콘, 이미지)
- `src/library/` : 사용을 편리하게 하거나 재사용을 줄이기 위해 만든 함수
- `src/pages/` : 컴포넌트를 조합하여 만든 페이지
- `src/routes/` : 페이지 라우팅을 위한 파일

```
📦susuMarket
 ┣ 📂public
   ┗ 📜index.html
 ┣ 📂src
   ┣ 📂components
   ┃ ┣ 📂commons
   ┃ ┃ ┣ 📂Back
   ┃ ┃ ┣ 📂Button
   ┃ ┃ ┣ 📂DataInput
   ┃ ┃ ┣ 📂ErrorMessage
   ┃ ┃ ┣ 📂Footer
   ┃ ┃ ┣ 📂Hint
   ┃ ┃ ┣ 📂HomeButton
   ┃ ┃ ┣ 📂Level
   ┃ ┃ ┣ 📂List
   ┃ ┃ ┣ 📂NextProb
   ┃ ┃ ┣ 📂PrevProb
   ┃ ┃ ┣ 📂Reset
   ┃ ┗ ┗ 📂UserInput
   ┣ 📂context
   ┣ 📂db
   ┣ 📂hook
   ┣ 📂img
   ┣ 📂library
   ┃ ┣ 📜checkWebpSupport.js
   ┃ ┣ 📜customAxios.js
   ┃ ┣ 📜imgCompression.js
   ┃ ┗ 📜imgValidation.js
   ┣ 📂pages
   ┃ ┣ 📂Beginer
   ┃ ┣ 📂Dictionary
   ┃ ┣ 📂Expert
   ┃ ┣ 📂FunctionKnow
   ┃ ┣ 📂FunctionProblem
   ┃ ┣ 📂HomeFeed
   ┃ ┣ 📂Intern
   ┃ ┣ 📂Login
   ┃ ┣ 📂Signup
   ┣ 📂routes
   ┣ .prettierrc.json 
   ┣ 📜App.js
   ┣ 📜GlobalStyle.js
   ┗ 📜index.js
```

<br/>
<p align="right"><a href="#top">TOP 🔼</a></p>
<br/>
